{"version":3,"sources":["webpack:///src/views/user/User.vue","webpack:///./src/views/user/User.vue?7186","webpack:///./src/views/user/User.vue"],"names":["formFields","User","undefined","md","md30","innerWidth","_this","this","resetForm","formDialog","extends_default","clearValidate","makeDialogResponsive","_this2","userForm","$store","dispatch","then","res","getUsers","catch","error","messages","msg","_this3","username","name","phone","role_id","shop_id","user_id","_this4","selectedId","_this5","deleteUserIds","users","pagination","pageSize","urlParams","currentPage","_this6","data","status_code","total","_this7","shops","sm","arguments","length","responsive","_this8","getShops","roles","user_User","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","gutter","type","icon","on","click","handleCreate","_v","_s","$t","multipleSelection","disabled","$event","handleDelete","_e","placeholder","nativeOn","keyup","_k","keyCode","key","model","value","callback","$$v","$set","expression","slot","directives","rawName","staticStyle","width","element-loading-text","border","fit","highlight-current-row","selection-change","handleSelectionChange","margin","prop","label","sortable","scopedSlots","_u","fn","scope","to","params","id","row","_l","role","shop","align","class-name","size","handleUpdate","background","current-page","page-sizes","sizes","page-size","layout","size-change","handleSizeChange","current-change","handleCurrentChange","update:currentPage","title","textMap","status","visible","dialog","update:visible","ref","rules","userFormRules","label-position","labelPosition","label-width","multiple","item","loading","createData","updateData","deleteDialog","center","deleteData","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/12.2b23b4dee245526cbc81.js","sourcesContent":["<template>\n  <div>\n    <div class=\"filter-container\">\n      <el-row :gutter=\"10\">\n        <el-col :sm=\"24\" :md=\"12\">\n          <el-button class=\"filter-item\" @click=\"handleCreate\" type=\"primary\" icon=\"el-icon-plus\">{{$t('table.add')}}</el-button>\n          <el-button class=\"filter-item\" type=\"danger\" :disabled=\"multipleSelection.length <= 0\"\n            v-if=\"multipleSelection.length>0\"\n            @click=\"handleDelete(multipleSelection)\"\n            icon=\"el-icon-delete\">{{$t('table.delete')}} ({{multipleSelection.length}} item)</el-button>\n        </el-col>\n        <el-col :sm=\"24\" :md=\"12\">\n          <el-input placeholder=\"Search\" v-model=\"urlParams.s\" class=\"input-with-select\" @keyup.enter.native=\"getUsers\">\n            <el-button slot=\"append\" icon=\"el-icon-search\" @click=\"getUsers\"></el-button>\n          </el-input>\n        </el-col>\n      </el-row>\n    </div>\n\n    <div class=\"table-container\">\n      <el-table :data=\"users\" v-loading=\"loading\" element-loading-text=\"Memuat data...\" @selection-change=\"handleSelectionChange\" border fit highlight-current-row style=\"width: 100%\">\n        <el-table-column type=\"selection\" width=\"55\" style=\"margin:0 auto;\"></el-table-column>\n        <el-table-column prop=\"username\" label=\"Username\" width=\"180\" sortable>\n          <template slot-scope=\"scope\">\n            <router-link :to=\"{ name: 'userDetail', params: { id: scope.row.user_id }}\">\n              <a>{{scope.row.username}}</a>\n            </router-link>\n          </template>\n        </el-table-column>\n        <el-table-column prop=\"name\" label=\"Name\" width=\"180\" sortable>\n        </el-table-column>\n        <el-table-column prop=\"phone\" label=\"Phone\">\n        </el-table-column>\n        <el-table-column label=\"Roles\">\n          <template slot-scope=\"scope\">\n            <div v-for=\"role in scope.row.roles\" :key=\"role.role_id\">\n              <el-tag type=\"danger\">{{role.name}}</el-tag>\n            </div>\n          </template>\n        </el-table-column>\n        <el-table-column label=\"Shops\">\n          <template slot-scope=\"scope\">\n            <el-tag\n              v-for=\"shop in scope.row.shops\" :key=\"shop.shop_id\"\n              style=\"margin:10px;\"\n              type=\"\">{{shop.name}}</el-tag>\n          </template>\n        </el-table-column>\n        <el-table-column align=\"center\" :label=\"$t('table.actions')\" width=\"230\" class-name=\"small-padding fixed-width\">\n          <template slot-scope=\"scope\">\n            <el-button type=\"primary\" size=\"mini\" @click=\"handleUpdate(scope.row)\" icon=\"el-icon-edit\">{{$t('table.edit')}}</el-button>\n            <el-button type=\"danger\" size=\"mini\" @click=\"handleDelete([scope.row])\" icon=\"el-icon-delete\" style=\"width:80px;\" >{{$t('table.delete')}}</el-button>\n          </template>\n        </el-table-column>\n      </el-table>\n\n      <!-- Pagination -->\n      <div class=\"pagination\">\n        <el-pagination\n          background\n          @size-change=\"handleSizeChange\"\n          @current-change=\"handleCurrentChange\"\n          :current-page.sync=\"pagination.currentPage\"\n          :page-sizes=\"pagination.sizes\"\n          :page-size=\"pagination.pageSize\"\n          layout=\"sizes, total, prev, pager, next\"\n          :total=\"pagination.total\">\n        </el-pagination>\n      </div>\n    </div>\n\n    <el-dialog :title=\"textMap[formDialog.status]\" :visible.sync=\"formDialog.visible\" :width=\"formDialog.dialog.width\">\n      <el-form :model=\"userForm\" :rules=\"userFormRules\" ref=\"userForm\" :label-position=\"formDialog.dialog.labelPosition\" label-width=\"100px\">\n        <el-form-item label=\"Username\" prop=\"username\">\n          <el-input type=\"text\" v-model=\"userForm.username\" placeholder=\"username\" :disabled=\"formDialog.status==='update'\"></el-input>\n        </el-form-item>\n\n        <el-form-item label=\"Password\" prop=\"password\" v-if=\"formDialog.status==='create'\">\n          <el-input type=\"text\" v-model=\"userForm.password\" placeholder=\"password\"></el-input>\n        </el-form-item>\n\n        <el-form-item label=\"Name\" prop=\"name\">\n          <el-input type=\"text\" v-model=\"userForm.name\" placeholder=\"name\"></el-input>\n        </el-form-item>\n\n        <el-form-item label=\"Phone\" prop=\"phone\">\n          <el-input type=\"text\" v-model=\"userForm.phone\" placeholder=\"phone\"></el-input>\n        </el-form-item>\n\n        <el-form-item label=\"Shops\" prop=\"shop_ids\">\n          <el-select v-model=\"userForm.shop_ids\" multiple placeholder=\"Select\" style=\"width:100%\">\n            <el-option\n              v-for=\"item in shops\"\n              :key=\"item.shop_id\"\n              :label=\"item.name\"\n              :value=\"item.shop_id\">\n            </el-option>\n          </el-select>\n        </el-form-item>\n\n        <el-form-item label=\"Roles\" prop=\"role_ids\">\n          <el-checkbox-group v-model=\"userForm.role_ids\" class=\"userForm__roles__checkboxGroup\">\n            <div v-for=\"role in roles\" :key=\"role.role_id\" style=\"width:170px;\">\n              <el-checkbox :label=\"role.role_id\" >{{role.name}}</el-checkbox>\n            </div>\n          </el-checkbox-group>\n        </el-form-item>\n\n        <el-form-item>\n          <el-button @click=\"formDialog.visible = false\">{{$t('table.cancel')}}</el-button>\n          <el-button v-if=\"formDialog.status==='create'\" :loading=\"loading\" type=\"primary\" @click=\"createData\">{{$t('table.confirm')}}</el-button>\n          <el-button v-else type=\"primary\" @click=\"updateData\">{{$t('table.confirm')}}</el-button>\n        </el-form-item>\n      </el-form>\n    </el-dialog>\n\n    <el-dialog\n      title=\"Delete Confirmation\"\n      :visible.sync=\"deleteDialog.visible\"\n      :width=\"formDialog.dialog.width\"\n      center>\n      <span>Are you sure want to delete?</span>\n      <span slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"deleteDialog.visible = false\">Cancel</el-button>\n        <el-button type=\"primary\" @click=\"deleteData\">Yes</el-button>\n      </span>\n    </el-dialog>\n\n  </div>\n</template>\n\n<script>\nimport { dialog } from \"@/responsive\";\nimport { arrayToObject } from \"@/utils/arrayToObject\";\n\nconst formFields = [\n  \"username\",\n  \"password\",\n  \"name\",\n  \"phone\",\n  [\"role_ids\", []],\n  [\"shop_ids\", []]\n];\n\nexport default {\n  data() {\n    return {\n      users: [],\n      roles: [],\n      shops: [],\n      loading: false,\n      textMap: {\n        update: \"Edit\",\n        create: \"Create\"\n      },\n\n      // form\n      formFields,\n      userForm: arrayToObject(formFields),\n      userFormRules: {\n        username: [{ required: true }],\n        password: [{ required: true }],\n        name: [{ required: true }],\n        phone: [{ required: true }],\n        role_ids: [{ required: true }],\n        shop_ids: [{ required: true }],\n      },\n\n      // edit\n      formDialog: {\n        visible: false,\n        status: \"\",\n        selectedId: undefined,\n        dialog: dialog.md\n      },\n\n      // delete\n      deleteDialog: {\n        visible: false,\n        dialog: dialog.md30\n      },\n      deleteUserIds: [],\n\n      // table\n      multipleSelection: [],\n\n      // Pagination\n      pagination: {\n        total: 0,\n        pageSize: 10,\n        currentPage: 1,\n        sizes: [5, 10, 20, 30, 40, 50, 100]\n      },\n\n      // Get\n      urlParams: {\n        s: \"\",\n        l: 10,\n        p: 1,\n        oby: \"created_at\", // order_by (user_id|username|name|phone|created_at)\n        sort: \"desc\"\n      },\n\n      // Responsive\n      windowWidth: window.innerWidth\n    };\n  },\n\n  methods: {\n    // Create\n    handleCreate() {\n      this.resetForm();\n      this.formDialog = {\n        ...this.formDialog,\n        status: \"create\",\n        visible: true\n      };\n      this.$nextTick(() => {\n        this.$refs[\"userForm\"].clearValidate();\n      });\n\n      // Responsive\n      this.makeDialogResponsive();\n    },\n    createData() {\n      this.$refs.userForm.validate(valid => {\n        if (valid) {\n          this.loading = true;\n\n          console.log(\"create data: \", this.userForm);\n\n          this.$store\n            .dispatch(\"AddUser\", this.userForm)\n            .then(res => {\n              // this.users.push({\n              //   ...res.data.data.user\n              // });\n\n              // refetch users data\n              this.getUsers();\n\n              this.$message.success(res.data.messages[0]);\n              this.formDialog.visible = false;\n              this.loading = false;\n            })\n            .catch(error => {\n              const errorMsg = error.response.data.messages;\n              errorMsg.forEach(msg => {\n                this.$message.error(msg);\n              });\n              this.loading = false;\n            });\n        }\n      });\n    },\n\n    // Update\n    handleUpdate(row) {\n      // this.userForm = Object.assign({}, row); // copy obj\n      this.userForm = {\n        username: row.username,\n        name: row.name,\n        phone: row.phone,\n        role_ids: row.roles.map(role => {\n          return role.role_id;\n        }),\n        shop_ids: row.shops.map(shop => {\n          return shop.shop_id;\n        })\n      };\n      this.formDialog = {\n        status: \"update\",\n        visible: true,\n        selectedId: row.user_id\n      };\n      this.userFormRules.password = [{ required: false }];\n      this.$nextTick(() => {\n        this.$refs[\"userForm\"].clearValidate();\n      });\n\n      // Responsive\n      this.makeDialogResponsive();\n    },\n    updateData() {\n      this.$refs.userForm.validate(valid => {\n        if (valid) {\n          this.loading = true;\n\n          // add user Id\n          this.userForm.userId = this.formDialog.selectedId;\n\n          this.$store\n            .dispatch(\"UpdateUser\", this.userForm)\n            .then(res => {\n              // const udpatedUser = res.data.data.user;\n\n              // // udpate user list data\n              // this.users.map(user => {\n              //   if (user.user_id === udpatedUser.user_id) {\n              //     const index = this.users.indexOf(user);\n              //     this.users.splice(index, 1, udpatedUser);\n              //   }\n              // });\n\n              // refetch users data\n              this.getUsers();\n\n              this.loading = false;\n              this.formDialog.visible = false;\n              this.$message.success(res.data.messages[0]);\n            })\n            .catch(error => {\n              const errorMsg = error.response.data.messages;\n              errorMsg.forEach(msg => {\n                this.$message.error(msg);\n              });\n              this.loading = false;\n            });\n        }\n      });\n    },\n\n    // Delete\n    handleDelete(users) {\n      this.deleteDialog.visible = true;\n      this.deleteUserIds = users.map(user => {\n        return user.user_id;\n      });\n\n      // Responsive\n      this.makeDialogResponsive(dialog.sm, dialog.md30);\n    },\n    deleteData() {\n      this.deleteDialog.visible = false;\n      this.$store\n        .dispatch(\"DeleteUser\", this.deleteUserIds)\n        .then(res => {\n          // remove deleted data from list\n          // this.users = this.users.filter(user => {\n          //   return this.deleteUserIds.indexOf(user.user_id) === -1;\n          // });\n\n          // refetch users data\n          this.getUsers();\n\n          this.$message.success(res.data.messages[0]);\n          this.deleteDialog.visible = false;\n          this.deleteUserIds = [];\n        })\n        .catch(error => {\n          const errorMsg = error.response.data.messages;\n          errorMsg.forEach(msg => {\n            this.$message.error(msg);\n          });\n        });\n    },\n\n    // Form\n    resetForm() {\n      this.userForm = arrayToObject(this.formFields);\n      console.log(this.userForm);\n    },\n\n    // Table\n    handleSelectionChange(users) {\n      this.multipleSelection = users;\n    },\n\n    // Pagination\n    handleSizeChange(pageSize) {\n      this.pagination = {\n        ...this.pagination,\n        pageSize\n      };\n      this.urlParams = {\n        ...this.urlParams,\n        l: pageSize\n      };\n\n      this.getUsers();\n    },\n    handleCurrentChange(currentPage) {\n      this.pagination = {\n        ...this.pagination,\n        currentPage\n      };\n      this.urlParams = {\n        ...this.urlParams,\n        p: currentPage\n      };\n      this.getUsers();\n    },\n\n    // Get\n    getUsers() {\n      this.loading = true;\n      this.$store.dispatch(\"FetchUsers\", this.urlParams).then(res => {\n        const data = res.data;\n        const messages = data.messages;\n        const status_code = data.status_code;\n\n        this.users = data.data.users;\n        this.loading = false;\n\n        // set pagination\n        this.pagination = {\n          ...this.pagination,\n          total: data.data.total\n        };\n      });\n    },\n    getShops() {\n      this.loading = true;\n      this.$store.dispatch(\"FetchShops\").then(res => {\n        const data = res.data;\n        const messages = data.messages;\n        const status_code = data.status_code;\n\n        this.shops = data.data.shops;\n        this.loading = false;\n      });\n    },\n\n    // Responsive\n    makeDialogResponsive(sm = dialog.sm, md = dialog.md) {\n      if (this.windowWidth < 990) {\n        this.formDialog = {\n          ...this.formDialog,\n          dialog: sm\n        };\n      } else {\n        this.formDialog = {\n          ...this.formDialog,\n          dialog: md\n        };\n      }\n    }\n  },\n\n  watch: {\n    windowWidth(newWidth, oldWidth) {\n      this.makeDialogResponsive();\n    }\n  },\n\n  created() {\n    this.getUsers();\n    this.getShops();\n\n    this.$store.dispatch(\"FetchRoles\").then(res => {\n      const data = res.data;\n      const messages = data.messages;\n      const status_code = data.status_code;\n\n      this.roles = data.data.roles;\n    });\n  },\n\n  mounted() {\n    let that = this;\n    this.$nextTick(function() {\n      window.addEventListener(\"resize\", function(e) {\n        that.windowWidth = window.innerWidth;\n      });\n    });\n  }\n};\n</script>\n\n<style scoped>\n.userForm__roles__checkboxGroup {\n  display: flex;\n  flex-wrap: wrap;\n  /* background: rgba(243, 242, 248, 0.8); */\n  max-height: 200px;\n  overflow-y: scroll;\n  padding: 0 10px;\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/views/user/User.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"filter-container\"},[_c('el-row',{attrs:{\"gutter\":10}},[_c('el-col',{attrs:{\"sm\":24,\"md\":12}},[_c('el-button',{staticClass:\"filter-item\",attrs:{\"type\":\"primary\",\"icon\":\"el-icon-plus\"},on:{\"click\":_vm.handleCreate}},[_vm._v(_vm._s(_vm.$t('table.add')))]),_vm._v(\" \"),(_vm.multipleSelection.length>0)?_c('el-button',{staticClass:\"filter-item\",attrs:{\"type\":\"danger\",\"disabled\":_vm.multipleSelection.length <= 0,\"icon\":\"el-icon-delete\"},on:{\"click\":function($event){_vm.handleDelete(_vm.multipleSelection)}}},[_vm._v(_vm._s(_vm.$t('table.delete'))+\" (\"+_vm._s(_vm.multipleSelection.length)+\" item)\")]):_vm._e()],1),_vm._v(\" \"),_c('el-col',{attrs:{\"sm\":24,\"md\":12}},[_c('el-input',{staticClass:\"input-with-select\",attrs:{\"placeholder\":\"Search\"},nativeOn:{\"keyup\":function($event){if(!('button' in $event)&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.getUsers($event)}},model:{value:(_vm.urlParams.s),callback:function ($$v) {_vm.$set(_vm.urlParams, \"s\", $$v)},expression:\"urlParams.s\"}},[_c('el-button',{attrs:{\"slot\":\"append\",\"icon\":\"el-icon-search\"},on:{\"click\":_vm.getUsers},slot:\"append\"})],1)],1)],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"table-container\"},[_c('el-table',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.users,\"element-loading-text\":\"Memuat data...\",\"border\":\"\",\"fit\":\"\",\"highlight-current-row\":\"\"},on:{\"selection-change\":_vm.handleSelectionChange}},[_c('el-table-column',{staticStyle:{\"margin\":\"0 auto\"},attrs:{\"type\":\"selection\",\"width\":\"55\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"username\",\"label\":\"Username\",\"width\":\"180\",\"sortable\":\"\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('router-link',{attrs:{\"to\":{ name: 'userDetail', params: { id: scope.row.user_id }}}},[_c('a',[_vm._v(_vm._s(scope.row.username))])])]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"name\",\"label\":\"Name\",\"width\":\"180\",\"sortable\":\"\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"phone\",\"label\":\"Phone\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"Roles\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return _vm._l((scope.row.roles),function(role){return _c('div',{key:role.role_id},[_c('el-tag',{attrs:{\"type\":\"danger\"}},[_vm._v(_vm._s(role.name))])],1)})}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"Shops\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return _vm._l((scope.row.shops),function(shop){return _c('el-tag',{key:shop.shop_id,staticStyle:{\"margin\":\"10px\"},attrs:{\"type\":\"\"}},[_vm._v(_vm._s(shop.name))])})}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"align\":\"center\",\"label\":_vm.$t('table.actions'),\"width\":\"230\",\"class-name\":\"small-padding fixed-width\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"mini\",\"icon\":\"el-icon-edit\"},on:{\"click\":function($event){_vm.handleUpdate(scope.row)}}},[_vm._v(_vm._s(_vm.$t('table.edit')))]),_vm._v(\" \"),_c('el-button',{staticStyle:{\"width\":\"80px\"},attrs:{\"type\":\"danger\",\"size\":\"mini\",\"icon\":\"el-icon-delete\"},on:{\"click\":function($event){_vm.handleDelete([scope.row])}}},[_vm._v(_vm._s(_vm.$t('table.delete')))])]}}])})],1),_vm._v(\" \"),_c('div',{staticClass:\"pagination\"},[_c('el-pagination',{attrs:{\"background\":\"\",\"current-page\":_vm.pagination.currentPage,\"page-sizes\":_vm.pagination.sizes,\"page-size\":_vm.pagination.pageSize,\"layout\":\"sizes, total, prev, pager, next\",\"total\":_vm.pagination.total},on:{\"size-change\":_vm.handleSizeChange,\"current-change\":_vm.handleCurrentChange,\"update:currentPage\":function($event){_vm.$set(_vm.pagination, \"currentPage\", $event)}}})],1)],1),_vm._v(\" \"),_c('el-dialog',{attrs:{\"title\":_vm.textMap[_vm.formDialog.status],\"visible\":_vm.formDialog.visible,\"width\":_vm.formDialog.dialog.width},on:{\"update:visible\":function($event){_vm.$set(_vm.formDialog, \"visible\", $event)}}},[_c('el-form',{ref:\"userForm\",attrs:{\"model\":_vm.userForm,\"rules\":_vm.userFormRules,\"label-position\":_vm.formDialog.dialog.labelPosition,\"label-width\":\"100px\"}},[_c('el-form-item',{attrs:{\"label\":\"Username\",\"prop\":\"username\"}},[_c('el-input',{attrs:{\"type\":\"text\",\"placeholder\":\"username\",\"disabled\":_vm.formDialog.status==='update'},model:{value:(_vm.userForm.username),callback:function ($$v) {_vm.$set(_vm.userForm, \"username\", $$v)},expression:\"userForm.username\"}})],1),_vm._v(\" \"),(_vm.formDialog.status==='create')?_c('el-form-item',{attrs:{\"label\":\"Password\",\"prop\":\"password\"}},[_c('el-input',{attrs:{\"type\":\"text\",\"placeholder\":\"password\"},model:{value:(_vm.userForm.password),callback:function ($$v) {_vm.$set(_vm.userForm, \"password\", $$v)},expression:\"userForm.password\"}})],1):_vm._e(),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"Name\",\"prop\":\"name\"}},[_c('el-input',{attrs:{\"type\":\"text\",\"placeholder\":\"name\"},model:{value:(_vm.userForm.name),callback:function ($$v) {_vm.$set(_vm.userForm, \"name\", $$v)},expression:\"userForm.name\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"Phone\",\"prop\":\"phone\"}},[_c('el-input',{attrs:{\"type\":\"text\",\"placeholder\":\"phone\"},model:{value:(_vm.userForm.phone),callback:function ($$v) {_vm.$set(_vm.userForm, \"phone\", $$v)},expression:\"userForm.phone\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"Shops\",\"prop\":\"shop_ids\"}},[_c('el-select',{staticStyle:{\"width\":\"100%\"},attrs:{\"multiple\":\"\",\"placeholder\":\"Select\"},model:{value:(_vm.userForm.shop_ids),callback:function ($$v) {_vm.$set(_vm.userForm, \"shop_ids\", $$v)},expression:\"userForm.shop_ids\"}},_vm._l((_vm.shops),function(item){return _c('el-option',{key:item.shop_id,attrs:{\"label\":item.name,\"value\":item.shop_id}})}))],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"Roles\",\"prop\":\"role_ids\"}},[_c('el-checkbox-group',{staticClass:\"userForm__roles__checkboxGroup\",model:{value:(_vm.userForm.role_ids),callback:function ($$v) {_vm.$set(_vm.userForm, \"role_ids\", $$v)},expression:\"userForm.role_ids\"}},_vm._l((_vm.roles),function(role){return _c('div',{key:role.role_id,staticStyle:{\"width\":\"170px\"}},[_c('el-checkbox',{attrs:{\"label\":role.role_id}},[_vm._v(_vm._s(role.name))])],1)}))],1),_vm._v(\" \"),_c('el-form-item',[_c('el-button',{on:{\"click\":function($event){_vm.formDialog.visible = false}}},[_vm._v(_vm._s(_vm.$t('table.cancel')))]),_vm._v(\" \"),(_vm.formDialog.status==='create')?_c('el-button',{attrs:{\"loading\":_vm.loading,\"type\":\"primary\"},on:{\"click\":_vm.createData}},[_vm._v(_vm._s(_vm.$t('table.confirm')))]):_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.updateData}},[_vm._v(_vm._s(_vm.$t('table.confirm')))])],1)],1)],1),_vm._v(\" \"),_c('el-dialog',{attrs:{\"title\":\"Delete Confirmation\",\"visible\":_vm.deleteDialog.visible,\"width\":_vm.formDialog.dialog.width,\"center\":\"\"},on:{\"update:visible\":function($event){_vm.$set(_vm.deleteDialog, \"visible\", $event)}}},[_c('span',[_vm._v(\"Are you sure want to delete?\")]),_vm._v(\" \"),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.deleteDialog.visible = false}}},[_vm._v(\"Cancel\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.deleteData}},[_vm._v(\"Yes\")])],1)])],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-377f97b2\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/user/User.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-377f97b2\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./User.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./User.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./User.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-377f97b2\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./User.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-377f97b2\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/user/User.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}