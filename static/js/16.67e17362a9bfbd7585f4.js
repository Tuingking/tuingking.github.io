webpackJsonp([16],{R8az:function(t,a,i){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n=i("Dd8w"),e=i.n(n),s=i("cI2h"),o=i("tHiA"),r=i("lqDr"),l=i("fuIb"),c=i("haSL"),d=["name","address","phone",["products",[]]],g={components:{appDeleteConfirmation:o.a,appTransactionTable:l.a,appTransactionDetailDialog:c.a},data:function(){return{transactions:[],products:[],loading:!1,textMap:{update:"Edit",create:"Create"},formFields:d,transactionForm:Object(r.a)(d),transactionFormRules:{name:[{required:!0}],address:[{required:!0}],phone:[{required:!0}]},formDialog:{visible:!1,status:"",selectedId:void 0,dialog:s.a.md},deleteDialog:{visible:!1,dialog:s.a.md30},deleteTransactionIds:[],multipleSelection:[],pagination:{total:0,pageSize:10,currentPage:1,sizes:[5,10,20,30,40,50,100]},urlParams:{s:"",l:10,p:1,oby:"transaction_id",sort:"desc"},windowWidth:window.innerWidth,transactionDetailDialog:{visible:!1,transaction:{}}}},methods:{handleSelectionChange:function(t){this.multipleSelection=t},handleSizeChange:function(t){this.pagination=e()({},this.pagination,{pageSize:t}),this.urlParams=e()({},this.urlParams,{l:t}),this.getTransactions()},handleCurrentChange:function(t){this.pagination=e()({},this.pagination,{currentPage:t}),this.urlParams=e()({},this.urlParams,{p:t}),this.getTransactions()},getTransactions:function(){var t=this;this.loading=!0,this.$store.dispatch("transaction/FetchTransactions",this.urlParams).then(function(a){var i=a.data;i.messages,i.status_code;console.log("FETCH TRANSACTION: ",i),t.transactions=i.data.transactions,t.loading=!1,t.pagination=e()({},t.pagination,{total:i.data.total})})},getProducts:function(t){var a=this,i={s:t,l:10,p:1,oby:"created_at",sort:"desc"};this.loading=!0,this.$store.dispatch("FetchProducts",i).then(function(t){var i=t.data;i.messages,i.status_code;a.products=i.data.products,a.loading=!1})},makeDialogResponsive:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s.a.sm,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s.a.md;this.windowWidth<990?this.formDialog=e()({},this.formDialog,{dialog:t}):this.formDialog=e()({},this.formDialog,{dialog:a})},openTransactionDetailDialog:function(t){console.log("Open transaction detail dialog"),this.transactionDetailDialog=e()({},this.transactionDetailDialog,{transaction:this.transactions.filter(function(a){return a.transaction_id===t})[0]}),this.transactionDetailDialog.visible=!0,console.log("transaction => ",this.transactionDetailDialog.transaction)},closeTransactionDetailDialog:function(){this.transactionDetailDialog.visible=!1}},watch:{windowWidth:function(t,a){this.makeDialogResponsive()}},created:function(){this.getTransactions()},mounted:function(){var t=this;this.$nextTick(function(){window.addEventListener("resize",function(a){t.windowWidth=window.innerWidth})})}},u={render:function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("div",[i("div",{staticClass:"filter-container"},[i("el-row",{attrs:{gutter:10}},[i("el-col",{attrs:{sm:24,md:12}},[i("el-input",{staticClass:"input-with-select",attrs:{placeholder:"Search"},nativeOn:{keyup:function(a){return"button"in a||!t._k(a.keyCode,"enter",13,a.key,"Enter")?t.getTransactions(a):null}},model:{value:t.urlParams.s,callback:function(a){t.$set(t.urlParams,"s",a)},expression:"urlParams.s"}},[i("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:t.getTransactions},slot:"append"})],1)],1)],1)],1),t._v(" "),i("div",{staticClass:"table-container"},[i("app-transaction-table",{attrs:{transactions:t.transactions,loading:t.loading,onViewBtnClicked:t.openTransactionDetailDialog}}),t._v(" "),i("div",{staticClass:"pagination"},[i("el-pagination",{attrs:{background:"","current-page":t.pagination.currentPage,"page-sizes":t.pagination.sizes,"page-size":t.pagination.pageSize,layout:"sizes, total, prev, pager, next",total:t.pagination.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange,"update:currentPage":function(a){t.$set(t.pagination,"currentPage",a)}}})],1)],1),t._v(" "),i("app-transaction-detail-dialog",{attrs:{visible:t.transactionDetailDialog.visible,transaction:t.transactionDetailDialog.transaction},on:{closeDialog:function(a){t.transactionDetailDialog.visible=!1}}})],1)},staticRenderFns:[]},h=i("VU/8")(g,u,!1,null,null,null);a.default=h.exports}});
//# sourceMappingURL=16.67e17362a9bfbd7585f4.js.map