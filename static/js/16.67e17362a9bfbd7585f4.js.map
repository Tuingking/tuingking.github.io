{"version":3,"sources":["webpack:///src/views/transaction/Transaction.vue","webpack:///./src/views/transaction/Transaction.vue?92b6","webpack:///./src/views/transaction/Transaction.vue"],"names":["formFields","Transaction","DeleteConfirmation","TransactionTable","TransactionDetailDialog","undefined","md","md30","innerWidth","transactions","pagination","extends_default","this","pageSize","urlParams","getTransactions","currentPage","_this","$store","dispatch","then","res","data","messages","status_code","total","_this2","query","products","sm","arguments","length","responsive","formDialog","transactionDetailDialog","transactionId","transaction","makeDialogResponsive","transaction_Transaction","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","gutter","placeholder","nativeOn","keyup","$event","_k","keyCode","key","model","value","callback","$$v","$set","expression","slot","icon","on","click","_v","loading","onViewBtnClicked","openTransactionDetailDialog","background","current-page","page-sizes","sizes","page-size","layout","size-change","handleSizeChange","current-change","handleCurrentChange","update:currentPage","visible","closeDialog","staticRenderFns","Component","__webpack_require__","normalizeComponent","__webpack_exports__"],"mappings":"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","file":"static/js/16.67e17362a9bfbd7585f4.js","sourcesContent":["<template>\n  <div>\n    <div class=\"filter-container\">\n      <el-row :gutter=\"10\">\n        <el-col :sm=\"24\" :md=\"12\">\n          <el-input placeholder=\"Search\" v-model=\"urlParams.s\" class=\"input-with-select\" @keyup.enter.native=\"getTransactions\">\n            <el-button slot=\"append\" icon=\"el-icon-search\" @click=\"getTransactions\"></el-button>\n          </el-input>\n        </el-col>\n      </el-row>\n    </div>\n\n    <div class=\"table-container\">\n      <app-transaction-table\n        :transactions=\"transactions\"\n        :loading=\"loading\"\n        :onViewBtnClicked=\"openTransactionDetailDialog\"\n      ></app-transaction-table>\n\n      <!-- Pagination -->\n      <div class=\"pagination\">\n        <el-pagination\n          background\n          @size-change=\"handleSizeChange\"\n          @current-change=\"handleCurrentChange\"\n          :current-page.sync=\"pagination.currentPage\"\n          :page-sizes=\"pagination.sizes\"\n          :page-size=\"pagination.pageSize\"\n          layout=\"sizes, total, prev, pager, next\"\n          :total=\"pagination.total\">\n        </el-pagination>\n      </div>\n    </div>\n\n    <app-transaction-detail-dialog\n      :visible=\"transactionDetailDialog.visible\"\n      :transaction=\"transactionDetailDialog.transaction\"\n      @closeDialog=\"transactionDetailDialog.visible = false\"\n    ></app-transaction-detail-dialog>\n\n  </div>\n</template>\n\n<script>\nimport { dialog } from \"@/responsive\";\nimport deleteConfirmation from \"@/components/dialog/DeleteConfirmation\";\nimport { arrayToObject } from \"@/utils/arrayToObject\";\nimport TransactionTable from \"@/components/Transaction/TransactionTable\";\nimport TransactionDetailDialog from \"@/components/Transaction/TransactionDetailDialog\";\n\nconst formFields = [\"name\", \"address\", \"phone\", [\"products\", []]];\n\nexport default {\n  components: {\n    appDeleteConfirmation: deleteConfirmation,\n    appTransactionTable: TransactionTable,\n    appTransactionDetailDialog: TransactionDetailDialog\n  },\n  data() {\n    return {\n      transactions: [],\n      products: [],\n      loading: false,\n      textMap: {\n        update: \"Edit\",\n        create: \"Create\"\n      },\n\n      // form\n      formFields,\n      transactionForm: arrayToObject(formFields),\n      transactionFormRules: {\n        name: [{ required: true }],\n        address: [{ required: true }],\n        phone: [{ required: true }]\n      },\n\n      // Add, edit dialog\n      formDialog: {\n        visible: false,\n        status: \"\",\n        selectedId: undefined,\n        dialog: dialog.md\n      },\n\n      // delete dialog\n      deleteDialog: {\n        visible: false,\n        dialog: dialog.md30\n      },\n      deleteTransactionIds: [],\n\n      // table\n      multipleSelection: [],\n\n      // Pagination\n      pagination: {\n        total: 0,\n        pageSize: 10,\n        currentPage: 1,\n        sizes: [5, 10, 20, 30, 40, 50, 100]\n      },\n\n      // Get\n      urlParams: {\n        s: \"\",\n        l: 10,\n        p: 1,\n        oby: \"transaction_id\", // order_by (transaction_id|total_price|created_at|created_by)\n        sort: \"desc\"\n      },\n\n      // Responsive\n      windowWidth: window.innerWidth,\n\n      // Transaction Dialog\n      transactionDetailDialog: {\n        visible: false,\n        transaction: {}\n      }\n    };\n  },\n\n  methods: {\n    // Table\n    handleSelectionChange(transactions) {\n      this.multipleSelection = transactions;\n    },\n\n    // Pagination\n    handleSizeChange(pageSize) {\n      this.pagination = {\n        ...this.pagination,\n        pageSize\n      };\n      this.urlParams = {\n        ...this.urlParams,\n        l: pageSize\n      };\n\n      this.getTransactions();\n    },\n    handleCurrentChange(currentPage) {\n      this.pagination = {\n        ...this.pagination,\n        currentPage\n      };\n      this.urlParams = {\n        ...this.urlParams,\n        p: currentPage\n      };\n      this.getTransactions();\n    },\n\n    // Get\n    getTransactions() {\n      this.loading = true;\n      this.$store\n        .dispatch(\"transaction/FetchTransactions\", this.urlParams)\n        .then(res => {\n          const data = res.data;\n          const messages = data.messages;\n          const status_code = data.status_code;\n\n          console.log(\"FETCH TRANSACTION: \", data);\n\n          this.transactions = data.data.transactions;\n          this.loading = false;\n\n          // set pagination\n          this.pagination = {\n            ...this.pagination,\n            total: data.data.total\n          };\n        });\n    },\n    getProducts(query) {\n      const urlParams = {\n        s: query,\n        l: 10,\n        p: 1,\n        oby: \"created_at\", // order_by (transaction_id|name|created_at)\n        sort: \"desc\"\n      };\n\n      this.loading = true;\n      this.$store.dispatch(\"FetchProducts\", urlParams).then(res => {\n        const data = res.data;\n        const messages = data.messages;\n        const status_code = data.status_code;\n\n        this.products = data.data.products;\n        this.loading = false;\n      });\n    },\n\n    // Responsive\n    makeDialogResponsive(sm = dialog.sm, md = dialog.md) {\n      if (this.windowWidth < 990) {\n        this.formDialog = {\n          ...this.formDialog,\n          dialog: sm\n        };\n      } else {\n        this.formDialog = {\n          ...this.formDialog,\n          dialog: md\n        };\n      }\n    },\n\n    // Transaction dialog\n    openTransactionDetailDialog(transactionId) {\n      console.log(\"Open transaction detail dialog\");\n      this.transactionDetailDialog = {\n        ...this.transactionDetailDialog,\n        transaction: this.transactions.filter(transaction => {\n          return transaction.transaction_id === transactionId;\n        })[0]\n      };\n      this.transactionDetailDialog.visible = true;\n      console.log(\"transaction => \", this.transactionDetailDialog.transaction);\n    },\n    closeTransactionDetailDialog() {\n      this.transactionDetailDialog.visible = false;\n    }\n  },\n\n  watch: {\n    windowWidth(newWidth, oldWidth) {\n      this.makeDialogResponsive();\n    }\n  },\n\n  created() {\n    this.getTransactions();\n  },\n\n  mounted() {\n    let that = this;\n    this.$nextTick(function() {\n      window.addEventListener(\"resize\", function(e) {\n        that.windowWidth = window.innerWidth;\n      });\n    });\n  }\n};\n</script>\n\n\n\n// WEBPACK FOOTER //\n// src/views/transaction/Transaction.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"filter-container\"},[_c('el-row',{attrs:{\"gutter\":10}},[_c('el-col',{attrs:{\"sm\":24,\"md\":12}},[_c('el-input',{staticClass:\"input-with-select\",attrs:{\"placeholder\":\"Search\"},nativeOn:{\"keyup\":function($event){if(!('button' in $event)&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.getTransactions($event)}},model:{value:(_vm.urlParams.s),callback:function ($$v) {_vm.$set(_vm.urlParams, \"s\", $$v)},expression:\"urlParams.s\"}},[_c('el-button',{attrs:{\"slot\":\"append\",\"icon\":\"el-icon-search\"},on:{\"click\":_vm.getTransactions},slot:\"append\"})],1)],1)],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"table-container\"},[_c('app-transaction-table',{attrs:{\"transactions\":_vm.transactions,\"loading\":_vm.loading,\"onViewBtnClicked\":_vm.openTransactionDetailDialog}}),_vm._v(\" \"),_c('div',{staticClass:\"pagination\"},[_c('el-pagination',{attrs:{\"background\":\"\",\"current-page\":_vm.pagination.currentPage,\"page-sizes\":_vm.pagination.sizes,\"page-size\":_vm.pagination.pageSize,\"layout\":\"sizes, total, prev, pager, next\",\"total\":_vm.pagination.total},on:{\"size-change\":_vm.handleSizeChange,\"current-change\":_vm.handleCurrentChange,\"update:currentPage\":function($event){_vm.$set(_vm.pagination, \"currentPage\", $event)}}})],1)],1),_vm._v(\" \"),_c('app-transaction-detail-dialog',{attrs:{\"visible\":_vm.transactionDetailDialog.visible,\"transaction\":_vm.transactionDetailDialog.transaction},on:{\"closeDialog\":function($event){_vm.transactionDetailDialog.visible = false}}})],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-1aa92347\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/transaction/Transaction.vue\n// module id = null\n// module chunks = ","var normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Transaction.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Transaction.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-1aa92347\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./Transaction.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/transaction/Transaction.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}